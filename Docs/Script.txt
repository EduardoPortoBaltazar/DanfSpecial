SELECT
  L.NUMERO_LANCAMENTO --parametro1
-- , parametro2 ainda não tenho
, MC.NUMMOVIMENTO -- parametro3
  FROM LANCAMENVHL L
INNER JOIN CONTACOR CC ON CC.IDCONTACOR = L.IDCONTACOR
INNER JOIN LANCPDV LP on LP.NUMERO_LANCAMENTO = L.NUMERO_LANCAMENTO
INNER JOIN NOTAPDV N ON N.NUMNOTA = cast(trim(Substring(LP.DOCUMENTO from 9 for 10)) as numeric(10,2))
INNER JOIN LANCAMENPDV LV ON LV.NUMNOTA = N.NUMNOTA AND LP.COD_ITEM_PDV = LV.CODITEM
INNER JOIN MOVCAIXA MC ON LV.NUMMESA = MC.NUMMESA AND LV.DATAMESA = MC.DATAMESA AND N.NUMNOTA = MC.NUMNOTA
INNER JOIN ITEM I ON I.CODITEM = LP.COD_ITEM_PDV  AND I.CODITEM =  LV.CODITEM
INNER JOIN GRUPOPRODUTO GP ON GP.IDGRUPOPRODUTOPAI IS NOT NULL AND GP.IDGRUPOPRODUTO = I.CODGRUPOITEM
INNER JOIN RESERVA R
ON R.NUMERO_UH =
CASE
char_length(LV.POSICAO)
WHEN 4 THEN
cast(trim(Substring(LV.POSICAO from 2 for 5)) as numeric(10,0))
WHEN 3 THEN LV.POSICAO
END
 AND R.COD_STATUS_RESERVA = 2
WHERE
       DATA_LANCAMENTO = '11.10.2021'
   AND CC.NOME_CONTA = 'RESTAURANTE'
   AND CC.DATA_CRIACAO IS NOT NULL
   AND CC.DATA_ENCERRAMENTO IS NULL
   AND N.DATAEMISSAO = '21.10.2021'
GROUP BY
  L.NUMERO_LANCAMENTO --parametro1
-- , parametro2 ainda não tenho
, MC.NUMMOVIMENTO -- parametro3


delete from lancamenvhl where numlancpai = parametro1

UPDATE LANCAMENVHL SET IDCONTACOR = parametro2 WHERE NUMERO_LANCAMENTO = parametro1

update movcaixa set tipodoc = 6  where nummovimento = parametro3